#!/usr/bin/env python3

import os
import re
import sys
sys.dont_write_bytecode = True

REAL_FILE = os.path.abspath(__file__)
REAL_NAME = os.path.basename(REAL_FILE)
REAL_PATH = os.path.dirname(REAL_FILE)
if os.path.islink(__file__):
    LINK_FILE = REAL_FILE; REAL_FILE = os.path.abspath(os.readlink(__file__))
    LINK_NAME = REAL_NAME; REAL_NAME = os.path.basename(REAL_FILE)
    LINK_PATH = REAL_PATH; REAL_PATH = os.path.dirname(REAL_FILE)

from argparse import ArgumentParser

ROLE_SUFFIXES = [
    'admin',
    'poweruser',
    'readonly',
    'viewonly',
]

ACTIONS = [
    'exec',
    'login',
    'role-arn',
]

def main(args):
    parser = ArgumentParser()
    parser.add_argument(
        '-r', '--role-suffix',
        default=ROLE_SUFFIXES[0],
        choices=ROLE_SUFFIXES,
        help='default="%(default)s"; choose the role suffix')
    parser.add_argument(
        'action',
        choices=ACTIONS,
        help='action to perform')

    ns = parser.parse_args()
    print(ns)

if __name__ == '__main__':
    main(sys.argv[1:])

